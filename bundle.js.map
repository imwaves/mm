{"version":3,"sources":["webpack:///webpack/bootstrap 89c07a85edab416f8839","webpack:///./src/main.js","webpack:///./src/common.js","webpack:///./src/main.styl"],"names":["console","log","$headerLogo","document","querySelector","HEADER_LOGO_RATIO","resizeHeaderLogo","_","debounce","style","height","offsetWidth","window","addEventListener","pannellum","viewer","viewportH","$labirint","$escape","escapeLength","rect","$marker","scrollY","fired","topTrigger","updateLabirint","innerHeight","getTotalLength","startTime","stopAnimation","Animate","_arr","_stopped","_active","add","fn","time","easing","easeInOutSin","push","start","Date","now","_go","_lastDate","l","length","arr","slice","i","phase","end","splice","requestAnimationFrame","stop","translateAlong","el","path","width","getBBox","startX","startY","getAttribute","match","setAttribute","parseFloat","p0","x","y","p","getPointAtLength","angle","Math","atan2","PI","centerX","centerY","offsetDasharray","strokeDasharray","strokeDashoffset","winLabirint","dir","getBoundingClientRect","top","pathStartPoint","d","attr","dsplitted","split","easeInOut","t","easeInSin","sin","easeOutSin","linear","func","wait","immediate","timeout","context","args","arguments","later","apply","callNow","clearTimeout","setTimeout","module","exports"],"mappings":"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","file":"./dist/bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 89c07a85edab416f8839","import 'main.styl';\n\nconsole.log('Started!');\n\n\n// HEADER LOGO\n\nconst $headerLogo = document.querySelector('#header-logo');\nconst HEADER_LOGO_RATIO = 1.777;\n\nconst resizeHeaderLogo = _.debounce(() => {\n  $headerLogo.style.height = (+$headerLogo.offsetWidth) / HEADER_LOGO_RATIO + 'px';\n}, 500);\n\nwindow.addEventListener('resize', resizeHeaderLogo);\nwindow.addEventListener('load', resizeHeaderLogo);\n\n// PANORAMA\n\npannellum.viewer('panorama', {\n    // \"type\": \"equirectangular\",\n    // \"panorama\": \"./pano-resized.png\",\n    \"type\": \"multires\",\n    \n    \"multiRes\": {\n        \"path\": \"panorama-tiles/%l/%s%y_%x\",\n        \"fallbackPath\": \"panorama-tiles/fallback/%s\",\n        \"extension\": \"jpg\",\n        \"tileResolution\": 512,\n        \"maxLevel\": 4,\n        \"cubeResolution\": 2600\n    },\n    \"autoLoad\": true\n});\n\n// LABIRINT\n\nvar viewportH, $labirint, $escape, escapeLength, rect, $marker, $escape, scrollY, fired, topTrigger;\n\nfunction updateLabirint () {\n  $labirint = document.querySelector('#labirint');\n  $escape = $labirint.querySelector('#escape');\n  $marker = $labirint.querySelector('#marker');\n  viewportH = window.innerHeight;\n\n  escapeLength = $escape.getTotalLength();\n}\n\nvar startTime = 0, stopAnimation;\n\nconst Animate = {\n  _arr: [],\n  _stopped: false,\n  _active: false,\n  add (fn, time = 1000, easing = easeInOutSin) {\n    Animate._stopped = false;\n    this._arr.push({fn, time, start: Date.now(), easing});\n    if (!this._active)\n      this._go();\n  },\n  _lastDate: 0,\n  _go () {\n    const l = Animate._arr.length;\n    if (!l && Animate._stopped)\n      return;\n\n    let now = Date.now();\n    if (now === Animate._lastDate)\n      now++;\n    Animate._lastDate = now;\n\n    let arr = Animate._arr.slice();\n\n    for(let i = 0; i < l; i++) {\n      let {fn, time, start, easing} = arr[i];\n      let phase = (now - start) / time;\n      let end = phase > 1;\n      if (end)\n        Animate._arr.splice(i, 1);\n      fn(easing(end ? 1 : phase));\n    }\n\n    if (!Animate._arr.length)\n      return;\n\n    requestAnimationFrame(Animate._go)\n  },\n  stop () {\n    Animate._stopped = true;\n    Animate._active = false;\n  }\n}\n// function animate (fn, time = 7000) {\n//   var now = Date.now();\n//   if (!startTime)\n//     startTime = now;\n//   var phase = (now - startTime) / time;\n//   if (phase > 1)\n//     return (startTime = 0);\n//   fn(easeInOutSin(phase));\n//   requestAnimationFrame(() => animate(fn, time));\n// }\n\nfunction translateAlong(el, path) {\n  var l = path.getTotalLength();\n  var {width, height} = el.getBBox();\n  var [, startX, startY] = path.getAttribute('d').match(/^M([\\d\\.]+),([\\d\\.]+) /);\n  el.setAttribute('transform', `translate(${parseFloat(startX)}, ${parseFloat(startY)})`);\n\n  var p0 = {x: startX, y: startY};\n  return function(phase) {\n    var p = path.getPointAtLength(phase * l);\n    var angle = Math.atan2(p.y - p0.y, p.x - p0.x) * 180 / Math.PI;\n    p0 = p;\n    var centerX = p.x - width/2,\n    centerY = p.y - height/2;\n    el.setAttribute('transform', `translate(${(centerX)},${centerY}) rotate(${angle} ${width/2} ${height/2})`);\n  }\n}\n\nfunction offsetDasharray (path) {\n  var l = path.getTotalLength();\n  path.style.strokeDasharray = escapeLength + ' ' + escapeLength;\n  path.style.strokeDashoffset = escapeLength;\n  return function (phase) {\n    path.style.strokeDashoffset = l - phase * l;\n  }\n}\n\nfunction winLabirint (dir) {\n  if (dir === -1) {\n    translateAlong($marker, $escape);\n    offsetDasharray($escape);\n  } else if (dir === 1) {\n    Animate.add(translateAlong($marker, $escape), 7000);\n    Animate.add(offsetDasharray($escape), 7000);\n  }\n}\n\ndocument.addEventListener('orientationchange', updateLabirint); \ndocument.addEventListener('resize', updateLabirint); \ndocument.addEventListener('DOMContentLoaded', () => {\n  updateLabirint();\n  winLabirint(-1);\n});\n\ndocument.addEventListener('scroll', _.debounce(() => {\n  scrollY = window.scrollY;\n  rect = $labirint.getBoundingClientRect();\n  topTrigger = rect.height;\n  if (!fired && rect.top < topTrigger) {\n    fired = true;\n    winLabirint(1);\n  }\n\n  if (fired && rect.top > viewportH) {\n    fired = false;\n    winLabirint(-1);\n  }\n}, 100));\n\nfunction pathStartPoint(path) {\n  var d = path.attr(\"d\"),\n  dsplitted = d.split(\" \");\n  return dsplitted[1].split(\",\");\n}\n\nfunction easeInOut (t) { return t<.5 ? 2*t*t : -1+(4-2*t)*t }\n\n  function easeInSin (t) {\n    return 1 + Math.sin(Math.PI / 2 * t - Math.PI / 2);\n  }\n  function easeOutSin  (t) {\n    return Math.sin(Math.PI / 2 * t);\n  }\n  function easeInOutSin (t) {\n    return (1 + Math.sin(Math.PI * t - Math.PI / 2)) / 2;\n  }\n\n  function linear (t) {return t}\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","function debounce(func, wait, immediate) {\n    var timeout;\n    return function() {\n        var context = this, args = arguments;\n        var later = function() {\n            timeout = null;\n            if (!immediate) func.apply(context, args);\n        };\n        var callNow = immediate && !timeout;\n        clearTimeout(timeout);\n        timeout = setTimeout(later, wait);\n        if (callNow) func.apply(context, args);\n    };\n};\n\nmodule.exports = {debounce}\n\n\n// WEBPACK FOOTER //\n// ./src/common.js","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/main.styl\n// module id = 2\n// module chunks = 0"],"sourceRoot":""}